# دليل تشغيل نظام إدارة المخزون على Docker

## التشغيل السريع

### الطريقة الأولى: التشغيل البسيط (بدون قاعدة بيانات)
```bash
./docker-simple-run.sh
```

### الطريقة الثانية: التشغيل الكامل (مع قاعدة بيانات PostgreSQL)
```bash
./docker-build.sh
```

## متطلبات النظام

- Docker Engine 20.0+
- Docker Compose v2.0+
- 2GB RAM على الأقل
- 5GB مساحة تخزين فارغة

## الروابط بعد التشغيل

- **التطبيق**: http://localhost:5000
- **قاعدة البيانات** (عند استخدام docker-compose): localhost:5432

## الأوامر المفيدة

### عرض السجلات
```bash
# للتشغيل البسيط
docker logs -f inventory-simple

# للتشغيل الكامل
docker-compose logs -f app
```

### إيقاف النظام
```bash
# للتشغيل البسيط
docker stop inventory-simple

# للتشغيل الكامل
docker-compose down
```

### إعادة البناء
```bash
# للتشغيل البسيط
docker build -t inventory-app . --no-cache

# للتشغيل الكامل
docker-compose build --no-cache
```

## استكشاف الأخطاء

### المشكلة: خطأ "Cannot find package 'vite'"
**الحل**: تم إصلاح هذه المشكلة في آخر تحديث للـ Dockerfile. إذا واجهت هذه المشكلة:

1. احذف الصورة القديمة:
   ```bash
   docker rmi inventory-app
   ```

2. أعد البناء:
   ```bash
   ./docker-build.sh
   ```

### المشكلة: فشل في الاتصال بقاعدة البيانات
**الحل**: استخدم التشغيل البسيط إذا لم تكن تحتاج لقاعدة البيانات:
```bash
./docker-simple-run.sh
```

### المشكلة: المنفذ 5000 مستخدم
**الحل**: أوقف الخدمات المستخدمة للمنفذ:
```bash
sudo lsof -i :5000
sudo kill -9 <PID>
```

## الميزات المدعومة في Docker

✅ **مدعوم بالكامل**:
- نظام إدارة المخزون العربي
- واجهة المستخدم الحديثة
- إدارة السيارات والفلاتر
- تصدير وطباعة التقارير
- نظام المصادقة
- التخزين في الذاكرة (MemStorage)

✅ **مدعوم مع قاعدة البيانات**:
- تخزين البيانات الدائم
- قاعدة بيانات PostgreSQL
- نسخ احتياطي تلقائي

## ملاحظات مهمة

1. **البيئة**: يعمل التطبيق في وضع الإنتاج (production mode)
2. **الأمان**: تأكد من تغيير كلمات المرور الافتراضية في الإنتاج
3. **الذاكرة**: التطبيق يستخدم MemStorage افتراضياً (البيانات مؤقتة)
4. **المجلدات**: مجلد uploads محفوظ خارج الحاوية

## الدعم الفني

إذا واجهت أي مشاكل، تحقق من:
1. سجلات Docker
2. حالة المنافذ
3. مساحة القرص المتوفرة
4. إصدار Docker